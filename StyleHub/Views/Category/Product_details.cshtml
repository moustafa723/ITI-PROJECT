@model StyleHub.Models.Product
@{
    Layout = "~/Views/Shared/_Layout_Style_hub.cshtml";
}
@* @await Html.PartialAsync("_PageHeader", ("Product Details", "Product Details"))
 *@<!-- Product Details Section -->
<section id="product-details" class="product-details section">

    <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row g-4">
            <!-- Product Gallery -->
            <div class="col-lg-7" data-aos="zoom-in" data-aos-delay="150">
                <div class="product-gallery">
                    <div class="main-showcase">
                        <div class="image-zoom-container">
                            <img src="@Model.Images.FirstOrDefault()"
                                 asp-append-version="true"
                                 alt="@Model.Alts"
                                 class="img-fluid main-product-image drift-zoom"
                                 id="main-product-image"
                                 data-zoom="@Model.Images.FirstOrDefault()">

                            <div class="image-navigation">
                                <button class="nav-arrow prev-image image-nav-btn prev-image" type="button">
                                    <i class="bi bi-chevron-left"></i>
                                </button>
                                <button class="nav-arrow next-image image-nav-btn next-image" type="button">
                                    <i class="bi bi-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="thumbnail-grid">
                        @for (int i = 0; i < Model.Images.Count; i++)
                        {
                            <div class="thumbnail-wrapper thumbnail-item @(i == 0 ? "active" : "")"
                                 data-image="@Model.Images[i]">
                                <img src="@Model.Images[i]"
                                     asp-append-version="true"
                                     alt="@Model.Alts"
                                     class="img-fluid" />
                            </div>
                        }


                    </div>
                </div>
            </div>

            <!-- Product Details -->
            <div class="col-lg-5" data-aos="fade-left" data-aos-delay="200">
                <div class="product-details">
                    <div class="product-badge-container">
                        <span class="badge-category">@Model.Category</span>
                        <div class="rating-group">
                            <div class="stars">
                                @{
                                    int fullStars = (int)Math.Floor(Model.Rating);
                                    bool hasHalfStar = (Model.Review - fullStars) >= 0.5;
                                    int emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
                                }

                                @for (int i = 0; i < fullStars; i++)
                                {
                                    <i class="bi bi-star-fill"></i>
                                }

                                @if (hasHalfStar)
                                {
                                    <i class="bi bi-star-half"></i>
                                }

                                @for (int i = 0; i < emptyStars; i++)
                                {
                                    <i class="bi bi-star"></i>
                                }


                            </div>
                            <span class="review-text">(@Model.Review)</span>
                        </div>
                    </div>
                    <h1 class="product-name">@Model.Name</h1>

                    <div class="pricing-section">
                        <div class="price-display">
                            <span class="sale-price"> EGP @Model.Price  </span>

                            @if (Model.OldPrice != null)
                            {
                                <span class="regular-price">EGP @Model.OldPrice</span>
                            }
                        </div>
                        <div class="savings-info">
                            <span class="save-amount">Save $50.00</span>
                            <span class="discount-percent">(21% off)</span>
                        </div>
                    </div>

                    <div class="product-description">
                        <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
                    </div>

                    <div class="availability-status">
                        <div class="stock-indicator">
                            <i class="bi bi-check-circle-fill"></i>
                            <span class="stock-text">Available</span>
                        </div>
                        <div class="quantity-left">Only 18 items remaining</div>
                    </div>

                    <!-- Product Variants -->
                    <div class="variant-section">
                        <div class="color-selection">
                            <label class="variant-label">Available Colors:</label>
                            <div class="color-grid">
                                <div class="color-chip active" data-color="Midnight Black" style="background: linear-gradient(135deg, #1a1a1a, #000);">
                                    <span class="selection-check"><i class="bi bi-check"></i></span>
                                </div>
                                <div class="color-chip" data-color="Pearl White" style="background: linear-gradient(135deg, #f8f9fa, #e9ecef);">
                                    <span class="selection-check"><i class="bi bi-check"></i></span>
                                </div>
                                <div class="color-chip" data-color="Ocean Blue" style="background: linear-gradient(135deg, #0066cc, #004499);">
                                    <span class="selection-check"><i class="bi bi-check"></i></span>
                                </div>
                                <div class="color-chip" data-color="Forest Green" style="background: linear-gradient(135deg, #28a745, #155724);">
                                    <span class="selection-check"><i class="bi bi-check"></i></span>
                                </div>
                            </div>
                            <div class="selected-variant">Selected: <span>Midnight Black</span></div>
                        </div>
                    </div>

                    <!-- Purchase Options -->
                    <div class="purchase-section">
                        <form asp-controller="Cart" asp-action="AddToCart" method="post" id="add-to-cart-form">
                            <div class="d-flex align-items-center gap-2">
                                <label class="me-2">Quantity:</label>
                                <button type="button" class="btn btn-sm"
                                        onclick="var q=document.getElementById('qty'); q.value=Math.max(1, parseInt(q.value||'1')-1)">
                                    –
                                </button>
                                <input id="qty" name="quantity" type="number" min="1" value="1"
                                       class="form-control" style="width:80px" />
                                <button type="button" class="btn btn-sm"
                                        onclick="var q=document.getElementById('qty'); q.value=parseInt(q.value||'1')+1">
                                    +
                                </button>
                            </div>

                            <input type="hidden" name="id" value="@Model.Id" />

                            <div class="action-buttons">

                                <form asp-controller="Cart" asp-action="AddToCart" method="post">
                                    <input type="hidden" name="cartId" value="@Model.Id" /> <!-- hardcoded for now -->
                                    <input type="hidden" name="productId" value="@Model.Id" />
                                    <input type="hidden" name="quantity" value="1" min="1" />
                                    <button type="submit" class="btn primary-action">
                                        <i class="bi bi-bag-plus"></i>
                                        Add to Cart
                                    </button>
                                </form>
                                <button type="button" class="btn secondary-action">
                                    <i class="bi bi-lightning"></i>
                                    Buy Now
                                </button>
                                <button type="button" class="btn icon-action" title="Add to Wishlist">
                                    <i class="bi bi-heart"></i>
                                </button>
                            </div>
                        </form>
                    </div>




                    <!-- Benefits List -->
                    <div class="benefits-list">
                        <div class="benefit-item">
                            <i class="bi bi-truck"></i>
                            <span>Free delivery on orders over $75</span>
                        </div>
                        <div class="benefit-item">
                            <i class="bi bi-arrow-clockwise"></i>
                            <span>45-day hassle-free returns</span>
                        </div>
                        <div class="benefit-item">
                            <i class="bi bi-shield-check"></i>
                            <span>3-year manufacturer warranty</span>
                        </div>
                        <div class="benefit-item">
                            <i class="bi bi-headset"></i>
                            <span>24/7 customer support available</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Information Tabs -->
        <div class="row mt-5" data-aos="fade-up" data-aos-delay="300">
            <div class="col-12">
                <div class="info-tabs-container">
                    <nav class="tabs-navigation nav">

                        <button class="nav-link " data-bs-toggle="tab" data-bs-target="#ecommerce-product-details-5-customer-reviews" type="button">Reviews (@Model.Review)</button>
                    </nav>

                    <div class="tab-content">

                        <!-- Reviews Tab -->
                        <div class="tab-pane fade" id="ecommerce-product-details-5-customer-reviews">
                            <div class="reviews-content">
                                <div class="reviews-header">
                                    <div class="rating-overview">
                                        <div class="average-score">
                                            <div class="score-display">@Model.Rating</div>
                                            <div class="score-stars">
                                                @{
                                                    int fullStarss = (int)Math.Floor(Model.Rating);
                                                    bool hasHalfStars = (Model.Review - fullStars) >= 0.5;
                                                    int emptyStarss = 5 - fullStars - (hasHalfStar ? 1 : 0);
                                                }

                                                @for (int i = 0; i < fullStars; i++)
                                                {
                                                    <i class="bi bi-star-fill"></i>
                                                }

                                                @if (hasHalfStar)
                                                {
                                                    <i class="bi bi-star-half"></i>
                                                }

                                                @for (int i = 0; i < emptyStars; i++)
                                                {
                                                    <i class="bi bi-star"></i>
                                                }

                                            </div>
                                            <div class="total-reviews">@Model.Review customer reviews</div>
                                        </div>

                                        <div class="rating-distribution">
                                            <div class="rating-row">
                                                <span class="stars-label">5★</span>
                                                <div class="progress-container">
                                                    <div class="progress-fill" style="width: 68%;"></div>
                                                </div>
                                                <span class="count-label">86</span>
                                            </div>
                                            <div class="rating-row">
                                                <span class="stars-label">4★</span>
                                                <div class="progress-container">
                                                    <div class="progress-fill" style="width: 22%;"></div>
                                                </div>
                                                <span class="count-label">28</span>
                                            </div>
                                            <div class="rating-row">
                                                <span class="stars-label">3★</span>
                                                <div class="progress-container">
                                                    <div class="progress-fill" style="width: 6%;"></div>
                                                </div>
                                                <span class="count-label">8</span>
                                            </div>
                                            <div class="rating-row">
                                                <span class="stars-label">2★</span>
                                                <div class="progress-container">
                                                    <div class="progress-fill" style="width: 3%;"></div>
                                                </div>
                                                <span class="count-label">4</span>
                                            </div>
                                            <div class="rating-row">
                                                <span class="stars-label">1★</span>
                                                <div class="progress-container">
                                                    <div class="progress-fill" style="width: 1%;"></div>
                                                </div>
                                                <span class="count-label">1</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="write-review-cta">
                                        <h4>Share Your Experience</h4>
                                        <p>Help others make informed decisions</p>
                                        <button class="btn review-btn">Write Review</button>
                                    </div>
                                </div>

                                <div class="customer-reviews-list">
                                    <div class="review-card">
                                        <div class="reviewer-profile">
                                            <img src="~/assets/img/person/person-f-3.webp" asp-append-version="true" alt="Customer" class="profile-pic">
                                            <div class="profile-details">
                                                <div class="customer-name">Sarah Martinez</div>
                                                <div class="review-meta">
                                                    <div class="review-stars">
                                                        <i class="bi bi-star-fill"></i>
                                                        <i class="bi bi-star-fill"></i>
                                                        <i class="bi bi-star-fill"></i>
                                                        <i class="bi bi-star-fill"></i>
                                                        <i class="bi bi-star-fill"></i>
                                                    </div>
                                                    <span class="review-date">March 28, 2024</span>
                                                </div>
                                            </div>
                                        </div>
                                        <h5 class="review-headline">Outstanding audio quality and comfort</h5>
                                        <div class="review-text">
                                            <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam. Eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
                                        </div>
                                        <div class="review-actions">
                                            <button class="action-btn"><i class="bi bi-hand-thumbs-up"></i> Helpful (12)</button>
                                            <button class="action-btn"><i class="bi bi-chat-dots"></i> Reply</button>
                                        </div>
                                    </div>

                                    <div class="review-card">
                                        <div class="reviewer-profile">
                                            <img src="~/assets/img/person/person-m-5.webp" asp-append-version="true" alt="Customer" class="profile-pic">
                                            <div class="profile-details">
                                                <div class="customer-name">David Chen</div>
                                                <div class="review-meta">
                                                    <div class="review-stars">
                                                        <i class="bi bi-star-fill"></i>
                                                        <i class="bi bi-star-fill"></i>
                                                        <i class="bi bi-star-fill"></i>
                                                        <i class="bi bi-star-fill"></i>
                                                        <i class="bi bi-star"></i>
                                                    </div>
                                                    <span class="review-date">March 15, 2024</span>
                                                </div>
                                            </div>
                                        </div>
                                        <h5 class="review-headline">Great value, minor connectivity issues</h5>
                                        <div class="review-text">
                                            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Overall satisfied with the purchase.</p>
                                        </div>
                                        <div class="review-actions">
                                            <button class="action-btn"><i class="bi bi-hand-thumbs-up"></i> Helpful (8)</button>
                                            <button class="action-btn"><i class="bi bi-chat-dots"></i> Reply</button>
                                        </div>
                                    </div>

                                    <div class="review-card">
                                        <div class="reviewer-profile">
                                            <img src="~/assets/img/person/person-f-7.webp" asp-append-version="true" alt="Customer" class="profile-pic">
                                            <div class="profile-details">
                                                <div class="customer-name">Emily Rodriguez</div>
                                                <div class="review-meta">
                                                    <div class="review-stars">
                                                        <i class="bi bi-star-fill"></i>
                                                        <i class="bi bi-star-fill"></i>
                                                        <i class="bi bi-star-fill"></i>
                                                        <i class="bi bi-star-fill"></i>
                                                        <i class="bi bi-star-fill"></i>
                                                    </div>
                                                    <span class="review-date">February 22, 2024</span>
                                                </div>
                                            </div>
                                        </div>
                                        <h5 class="review-headline">Perfect for work-from-home setup</h5>
                                        <div class="review-text">
                                            <p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident.</p>
                                        </div>
                                        <div class="review-actions">
                                            <button class="action-btn"><i class="bi bi-hand-thumbs-up"></i> Helpful (15)</button>
                                            <button class="action-btn"><i class="bi bi-chat-dots"></i> Reply</button>
                                        </div>
                                    </div>

                                    <div class="load-more-section">
                                        <button class="btn load-more-reviews">Show More Reviews</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


</section><!-- /Product Details Section -->

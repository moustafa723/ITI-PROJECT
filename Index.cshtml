@using Newtonsoft.Json.Linq
@model ecomm.Models.excracetvm.Shop
@{
    Layout = "~/Views/Shared/_Layout3.cshtml";
}
<!-- Hero Section -->
<section id="hero" class="hero section">

    <div class="hero-container">
        <div class="hero-content">
            <div class="content-wrapper" data-aos="fade-up" data-aos-delay="100">
                <h1 class="hero-title">Discover Amazing Products</h1>
                <p class="hero-description">Explore our curated collection of premium items designed to enhance your lifestyle. From fashion to tech, find everything you need with exclusive deals and fast shipping.</p>
                <div class="hero-actions" data-aos="fade-up" data-aos-delay="200">
                    <a href="#promo-cards" class="btn-primary">Shop Now</a>
                    <a asp-controller="Category" asp-action="Index" class="btn-secondary">Browse Categories</a>
                </div>
                <div class="features-list" data-aos="fade-up" data-aos-delay="300">
                    <div class="feature-item">
                        <i class="bi bi-truck"></i>
                        <span>Free Shipping</span>
                    </div>
                    <div class="feature-item">
                        <i class="bi bi-award"></i>
                        <span>Quality Guarantee</span>
                    </div>
                    <div class="feature-item">
                        <i class="bi bi-headset"></i>
                        <span>24/7 Support</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="hero-visuals">
            <div class="product-showcase" data-aos="fade-left" data-aos-delay="200">
                <div class="product-card featured">
                    <img src="~/assets/img/product/product-2.webp" alt="Featured Product" class="img-fluid">
                    <div class="product-badge">Best Seller</div>
                    <div class="product-info">
                        <h4>Premium Wireless Headphones</h4>
                        <div class="price">
                            <span class="sale-price">$299</span>
                            <span class="original-price">$399</span>
                        </div>
                    </div>
                </div>

                <div class="product-grid">
                    <div class="product-mini" data-aos="zoom-in" data-aos-delay="400">
                        <img src="~/assets/img/product/product-3.webp" alt="Product" class="img-fluid">
                        <span class="mini-price">$89</span>
                    </div>
                    <div class="product-mini" data-aos="zoom-in" data-aos-delay="500">
                        <img src="~/assets/img/product/product-5.webp" alt="Product" class="img-fluid">
                        <span class="mini-price">$149</span>
                    </div>
                </div>
            </div>

            <div class="floating-elements">
                <div class="floating-icon cart" data-aos="fade-up" data-aos-delay="600">
                    <i class="bi bi-cart3"></i>
                    <span class="notification-dot">3</span>
                </div>
                <div class="floating-icon wishlist" data-aos="fade-up" data-aos-delay="700">
                    <i class="bi bi-heart"></i>
                </div>
                <div class="floating-icon search" data-aos="fade-up" data-aos-delay="800">
                    <i class="bi bi-search"></i>
                </div>
            </div>
        </div>
    </div>

</section>
<!-- /Hero Section -->
<!-- Promo Cards Section -->
<section id="promo-cards" class="promo-cards section">
    <div class="container" data-aos="fade-up" data-aos-delay="100">
        <div class="row gy-4">

            <div class="col-lg-6">
                <div class="category-featured" data-aos="fade-right" data-aos-delay="200">
                    <div class="category-image">
                        <img src="~/assets/img/product/product-f-2.webp" alt="Women's Collection" class="img-fluid">
                    </div>
                    <div class="category-content">
                        <span class="category-tag">Trending Now</span>
                        <h2>New Summer Collection</h2>
                        <p>Discover our latest arrivals designed for the modern lifestyle. Elegant, comfortable, and sustainable fashion for every occasion.</p>
                        <a href="#" class="btn-shop">Explore Collection <i class="bi bi-arrow-right"></i></a>
                    </div>
                </div>
            </div>

            <div class="col-lg-6">

                <div class="row gy-4">

                    @foreach (var category in Model.Categories)
                    {
                        <div class="col-xl-6">
                            <div class="category-card @category.Color" data-aos="fade-up" data-aos-delay="5000">
                                <div class="category-image">
                                    <img src="@Url.Content(category.Image)" alt="@category.Alt" class="img-fluid" />
                                </div>
                                <div class="category-content">
                                    <h4>@category.Title</h4>
                                    <p>@category.ProductsCount products</p>
                                    <a asp-controller="Category" asp-action="Index" class="card-link">Shop Now <i class="bi bi-arrow-right"></i></a>
                                </div>
                            </div>
                        </div>
                    }

                </div>
            </div>

        </div>

    </div>
</section>
<!-- /Promo Cards Section -->
<!-- Best Sellers Section -->
<section id="best-sellers" class="best-sellers section">

    <!-- Section Title -->
    <div class="container section-title" data-aos="fade-up">
        <h2>Best Sellers</h2>
        <p>Necessitatibus eius consequatur ex aliquid fuga eum quidem sint consectetur velit</p>
    </div><!-- End Section Title -->

    <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row g-5">
            <!-- Product  -->
            @foreach (var prod in Model.Products)
            {
                <div class="col-lg-3 col-md-6">
                    <div class="product-item">
                        <div class="product-image">
                            @if (prod.Color != null)
                            {
                                <div class="product-badge @prod.Color">@prod.Badge</div>
                            }

                            <img src="@prod.Image" alt="@prod.Alt" class="img-fluid" loading="lazy">
                            <div class="product-actions">
                                <button class="action-btn wishlist-btn">
                                    <i class="bi bi-heart"></i>
                                </button>
                                <button class="action-btn compare-btn">
                                    <i class="bi bi-arrow-left-right"></i>
                                </button>
                                <button class="action-btn quickview-btn">
                                    <i class="bi bi-zoom-in"></i>
                                </button>
                            </div>
                            <button class="cart-btn">@prod.curdbutton</button>
                        </div>
                        <div class="product-info">
                            <div class="product-category">@prod.Category</div>
                            <h4 class="product-name"><a asp-controller="Category" asp-action="Product_details" asp-route-id="1002">@prod.Name</a></h4>
                            <div class="product-rating">
                                <div class="stars">
                                    @{
                                        int fullStars = (int)Math.Floor(prod.Rating);
                                        bool hasHalfStar = (prod.Rating - fullStars) >= 0.5;
                                        int emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
                                    }

                                    @for (int i = 0; i < fullStars; i++)
                                    {
                                        <i class="bi bi-star-fill"></i>
                                    }

                                    @if (hasHalfStar)
                                    {
                                        <i class="bi bi-star-half"></i>
                                    }

                                    @for (int i = 0; i < emptyStars; i++)
                                    {
                                        <i class="bi bi-star"></i>
                                    }


                                </div>

                                <span class="rating-count">(@prod.ReviewCount)</span>
                            </div>
                            <div class="product-price">
                                @if (prod.OldPrice > 0)
                                {
                                    <span class="old-price">$@prod.OldPrice</span>

                                }
                                <span class="current-price">$@prod.Price</span>
                            </div>
                            <div class="color-swatches">
                                @if (!string.IsNullOrEmpty(prod.Colors))
                                {
                                    var colorList = prod.Colors.Split(",", StringSplitOptions.RemoveEmptyEntries);
                                    for (int i = 0; i < colorList.Length; i++)
                                    {
                                        var color = colorList[i];
                                        <span class="swatch @(i == 0 ? "active" : "")" style="background-color:@color;"></span>
                                    }
                                }
                            </div>
                        </div>
                    </div>
                </div>
            }
            <!-- End Product  -->


        </div>

    </div>


</section>
<!-- Cards Section -->
<section id="cards" class="cards section">

    <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row gy-4">
            @for (int i = 0; i < Model.Cards.Count; i++)
            {
                var card = Model.Cards[i];
                var productsForCard = Model.prodcards.Skip(i * 3).Take(3).ToList();
                <div class="col-lg-4 col-md-6 mb-5 mb-md-0" data-aos="fade-up" data-aos-delay="@card.delay">
                    <div class="product-category">
                        <h3 class="category-title">
                            <i class="bi @card.icone"></i> @card.name
                        </h3>
                        <div class="product-list">
                            @foreach (var products in productsForCard)
                            {
                                <div class="product-card">
                                    <div class="product-image">
                                        <img src="@products.Image" alt="@products.Alt" class="img-fluid">
                                        @if (products.Color != null)
                                        {
                                            <div class="product-badges">

                                                <span class="@products.Color">@products.Badge</span>

                                            </div>
                                        }
                                    </div>
                                    <div class="product-info">
                                        <h4 class="product-name">@products.Name</h4>
                                        <div class="product-rating">
                                            @{
                                                int fullStars = (int)Math.Floor(products.Rating);
                                                bool hasHalfStar = (products.Rating - fullStars) >= 0.5;
                                                int emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
                                            }

                                            @for (int x = 0; x < fullStars; x++)
                                            {
                                                <i class="bi bi-star-fill"></i>
                                            }

                                            @if (hasHalfStar)
                                            {
                                                <i class="bi bi-star-half"></i>
                                            }

                                            @for (int x = 0; x < emptyStars; x++)
                                            {
                                                <i class="bi bi-star"></i>
                                            }
                                            <span>(@products.ReviewCount)</span>
                                        </div>
                                        <div class="product-price">
                                            <span class="current-price">$@products.Price</span>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            }
        </div>

    </div>

</section>
<!-- /Cards Section -->
<!-- Call To Action Section -->
<section id="call-to-action" class="call-to-action section">

    <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="main-content text-center" data-aos="zoom-in" data-aos-delay="200">
                    <div class="offer-badge" data-aos="fade-down" data-aos-delay="250">
                        <span class="limited-time">Limited Time</span>
                        <span class="offer-text">50% OFF</span>
                    </div>

                    <h2 data-aos="fade-up" data-aos-delay="300">Exclusive Flash Sale</h2>

                    <p class="subtitle" data-aos="fade-up" data-aos-delay="350">Don't miss out on our biggest sale of the year. Premium quality products at unbeatable prices for the next 48 hours only.</p>

                    <div class="countdown-wrapper" data-aos="fade-up" data-aos-delay="400">
                        <div class="countdown d-flex justify-content-center" data-count="2025/12/31">
                            <div>
                                <h3 class="count-days"></h3>
                                <h4>Days</h4>
                            </div>
                            <div>
                                <h3 class="count-hours"></h3>
                                <h4>Hours</h4>
                            </div>
                            <div>
                                <h3 class="count-minutes"></h3>
                                <h4>Minutes</h4>
                            </div>
                            <div>
                                <h3 class="count-seconds"></h3>
                                <h4>Seconds</h4>
                            </div>
                        </div>
                    </div>

                    <div class="action-buttons" data-aos="fade-up" data-aos-delay="450">
                        <a href="#" class="btn-shop-now">Shop Now</a>
                        <a href="#" class="btn-view-deals">View All Deals</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="row featured-products-row" data-aos="fade-up" data-aos-delay="500">
            @foreach (var pend in Model.productends)
            {
                <div class="col-lg-3 col-md-6" data-aos="zoom-in" data-aos-delay="100">
                    <div class="product-showcase">
                        <div class="product-image">
                            <img src="@pend.Image" alt="@pend.Alt" class="img-fluid">
                            <div class="@pend.Color">@pend.Badge</div>
                        </div>
                        <div class="product-details">
                            <h6>Premium Wireless Headphones</h6>
                            <div class="price-section">
                                <span class="original-price">$@pend.OldPrice</span>
                                <span class="sale-price">$@pend.Price</span>
                            </div>
                            <div class="rating-stars">
                                @{
                                    int fullStars = (int)Math.Floor(pend.Rating);
                                    bool hasHalfStar = (pend.Rating - fullStars) >= 0.5;
                                    int emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
                                }

                                @for (int x = 0; x < fullStars; x++)
                                {
                                    <i class="bi bi-star-fill"></i>
                                }

                                @if (hasHalfStar)
                                {
                                    <i class="bi bi-star-half"></i>
                                }

                                @for (int x = 0; x < emptyStars; x++)
                                {
                                    <i class="bi bi-star"></i>
                                }
                                <span class="rating-count">(@pend.ReviewCount)</span>
                            </div>
                        </div>
                    </div>
                </div>
                }
        </div>
    </div>

</section><!-- /Call To Action Section -->
